<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link href="/favicon.ico" rel="icon"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><meta content="Web site created using create-react-app" name="description"><link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet"><link href="/logo192.png" rel="apple-touch-icon"><link href="/manifest.json" rel="manifest"><script type="text/javascript">!function(i){if(i.search){var a={};i.search.slice(1).split("&").forEach((function(i){var l=i.split("=");a[l[0]]=l.slice(1).join("=").replace(/~and~/g,"&")})),void 0!==a.p&&window.history.replaceState(null,null,i.pathname.slice(0,-1)+(a.p||"")+(a.q?"?"+a.q:"")+i.hash)}}(window.location)</script><style>@font-face{font-family:'Cascadia Code PL';src:url(/CascadiaCodePL.woff2)}</style><title>Nathan Smith</title><link href="/static/css/2.ca3edc6c.chunk.css" rel="stylesheet"><link href="/static/css/main.24b1d68f.chunk.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><style data-emotion="css-global">html{box-sizing:border-box;color:#333;font-family:Lato,sans-serif;font-size:16px}h1{font-size:2em;font-weight:300}h2{font-size:1.5em;font-weight:300}h3{font-size:1.3em;font-weight:400}h4{font-size:1.15em;font-weight:400}p{font-size:1em;font-weight:400}h1,h2,h3,h4,p{margin:0}h1 .muted,h2 .muted,h3 .muted,h4 .muted,p .muted{color:#707070}*,::after,::before{box-sizing:inherit}</style><style data-emotion="css-global">body{background-color:#e7ecef}</style><style data-emotion="css">.css-1lqfg8b{background-color:#377771;color:#fff;padding:16px}.css-azszlm{display:flex;list-style:none;margin:0;padding:0}.css-azszlm>li{display:block;margin:0 12px;cursor:pointer}.css-azszlm>li:first-child{margin-left:0}.css-azszlm>li:last-child{margin-right:0}.css-azszlm>li.spacer{cursor:initial;-webkit-box-flex:1;flex-grow:1}.css-azszlm>li a{text-decoration:none}.css-azszlm>li a,.css-azszlm>li a:active,.css-azszlm>li a:hover,.css-azszlm>li a:visited{color:#fff}.css-azszlm>li a:hover{text-decoration:underline}.css-f5kvh0[data-animation=fade][data-state=hidden]{opacity:0}.css-f5kvh0 [data-tippy-root]{max-width:calc(100vw - 10px)}.css-f5kvh0{transition-property:transform,visibility,opacity}.css-f5kvh0[data-placement^=top]>.tippy-arrow{bottom:0}.css-f5kvh0[data-placement^=top]>.tippy-arrow::before{bottom:-3px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.css-f5kvh0[data-placement^=bottom]>.tippy-arrow{top:0}.css-f5kvh0[data-placement^=bottom]>.tippy-arrow::before{top:-3px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.css-f5kvh0[data-placement^=left]>.tippy-arrow{right:0}.css-f5kvh0[data-placement^=left]>.tippy-arrow::before{border-width:8px 0 8px 8px;border-left-color:initial;right:-3px;transform-origin:left center}.css-f5kvh0[data-placement^=right]>.tippy-arrow{left:0}.css-f5kvh0[data-placement^=right]>.tippy-arrow::before{left:-3px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:right center}.css-f5kvh0[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.css-f5kvh0 .tippy-arrow{width:16px;height:16px;color:#fff}.css-f5kvh0 .tippy-arrow::before{content:"";position:absolute;border-color:transparent;border-style:solid}.css-f5kvh0 .tippy-content{position:relative;padding:5px 9px;z-index:1}.css-rxcuqt{margin:24px auto 16px;max-width:900px}.css-wjtp6{display:block;color:#333;padding:0;margin:0;box-shadow:rgba(0,0,0,.2) 0 2px 4px -1px,rgba(0,0,0,.14) 0 4px 5px 0,rgba(0,0,0,.12) 0 1px 10px 0}.css-wjtp6 li{min-width:100px;display:block;position:relative;margin:0;padding:8px;min-height:20px;background-color:#fff;transition:background-color .3s ease-in-out 0s;text-align:center}.css-wjtp6 li:hover{background-color:#4ce0b3}.css-1wla3xl{margin-bottom:4px}.css-8qbqv4{margin-bottom:12px}.css-171uofl{margin-bottom:24px}.css-171uofl p{margin-bottom:16px;margin-top:4px}.css-171uofl h1,.css-171uofl h2{margin-bottom:4px}.css-171uofl h3,.css-171uofl h4{margin-bottom:16px}</style><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://api.buttercms.com" rel="preconnect"><link href="https://raw.githubusercontent.com" rel="preconnect"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div><header class="css-1lqfg8b"><ul class="css-azszlm"><li><a href="/"><h2 class="">Nathan Smith</h2></a></li><li class="spacer"></li><li><h2 class="" aria-expanded="false">Projects</h2></li><li><a href="/about"><h2 class="">About</h2></a></li><li><a href="/contact"><h2 class="">Contact</h2></a></li></ul></header><div class="css-rxcuqt"><h1 class="css-1wla3xl">Using thefuck On Windows, With Clink & Cmder</h1><h4 class="css-8qbqv4">August 14, 2018, 3:16 PM—<a href="/blog/category/devtools">Devtools</a></h4><div class="css-171uofl line-numbers"><p>We all make mistakes, and sometimes we get angry about them. <a href="https://github.com/nvbn/thefuck" rel="noopener" target="_blank" title="The Fuck">thefuck</a> is a handy Python script that turns that anger into something useful by suggesting a correction to a previously failed command.</p><figure class="image"><img alt="thefuck Example" src="https://raw.githubusercontent.com/nvbn/thefuck/master/example.gif"><figcaption>thefuck Example</figcaption></figure><p>So, lets make it work on Windows, which will require <a href="https://mridgers.github.io/clink/" rel="noopener" target="_blank">Clink</a> or <a href="http://cmder.net/" rel="noopener" target="_blank">Cmder</a>. Clink adds some Unix-like features to the Windows command prompt, while Cmder is a package that includes Clink along with a number of other applications to provide a complete terminal solution for Windows. Both are free, and Cmder is always one of the first things I install on a new computer. It's really the best way to use the terminal on Windows. Lets get started. <em>Caveat: this is probably not the best way to make this work, but it's what I came up with while bored at work.</em></p><h2>Prerequisites</h2><ol><li>Install <a href="https://mridgers.github.io/clink/">Clink</a>, or better yet, <a href="http://cmder.net/" rel="noopener" target="_blank">Cmder</a>.</li><li>Install thefuck with pip: <code>pip install thefuck</code></li><li>Enable Clink history: <code>clink set history_io 1</code></li></ol><h2>Create the Alias</h2><p>thefuck works by having platform specific aliases to get the last run command, fix your mistake, and then run the fixed command. Because there's no Windows specific alias (excluding PowerShell, which can be setup following <a href="https://github.com/nvbn/thefuck/wiki/Shell-aliases#powershell" rel="noopener" target="_blank">these directions</a>), we have to make our own. Save this file as <code>thefuckcmder.bat</code> or some other <code>.bat</code> filename. Remember where you save it or ensure it's available in your PATH.</p><p><strong>For Clink</strong></p><pre class="language-batch line-numbers"><code class="language-batch">@echo off
set PYTHONIOENCODING=utf-8
set PYTHONLEGACYWINDOWSSTDIO=yes
tail -n 2 %LOCALAPPDATA%\clink\.history | head -n 1 > %LOCALAPPDATA%\clink\fucked_cmd.txt
set /p fucked_cmd=&lt;%LOCALAPPDATA%\clink\fucked_cmd.txt
thefuck %fucked_cmd% > %LOCALAPPDATA%\clink\unfucked.cmd
call %LOCALAPPDATA%\clink\unfucked.cmd<span class="line-numbers-rows" aria-hidden="true"><span style="height:24px"></span><span style="height:24px"></span><span style="height:24px"></span><span style="height:72px"></span><span style="height:48px"></span><span style="height:48px"></span><span style="height:24px"></span></span><span style="display:none" class="line-numbers-sizer"></span></code></pre><p><strong>For Cmder</strong></p><pre class="language-batch line-numbers"><code class="language-batch">@echo off
set PYTHONIOENCODING=utf-8
set PYTHONLEGACYWINDOWSSTDIO=yes
tail -n 2 %CMDER_ROOT%\config\.history | head -n 1 > %CMDER_ROOT%\config\fucked_cmd.txt
set /p fucked_cmd=&lt;%CMDER_ROOT%\config\fucked_cmd.txt
thefuck %fucked_cmd% > %CMDER_ROOT%\config\unfucked.cmd
call %CMDER_ROOT%\config\unfucked.cmd<span class="line-numbers-rows" aria-hidden="true"><span style="height:24px"></span><span style="height:24px"></span><span style="height:24px"></span><span style="height:48px"></span><span style="height:48px"></span><span style="height:48px"></span><span style="height:24px"></span></span><span style="display:none" class="line-numbers-sizer"></span></code></pre><p>Now we have to create the alias that calls that script, replacing 'thefuckcmder' with the path to your script.</p><p><strong>For Clink</strong></p><pre class="language-batch line-numbers"><code class="language-batch">doskey fuck=thefuckcmder<span class="line-numbers-rows" aria-hidden="true"><span style="height:24px"></span></span><span style="display:none" class="line-numbers-sizer"></span></code></pre><p><strong>For Cmder</strong></p><pre class="language-batch line-numbers"><code class="language-batch">alias fuck=thefuckcmder<span class="line-numbers-rows" aria-hidden="true"><span style="height:24px"></span></span><span style="display:none" class="line-numbers-sizer"></span></code></pre><p>After you restart your shell, running a failing command and <code>fuck</code> should work as expected.</p></div><div class="css-1wla3xl">Next: <a href="/blog/post/metal-synthwave-are-the-same-thing">Metal & Synthwave are the Same Thing</a></div></div></div></div><script>!function(e){function t(t){for(var n,i,l=t[0],f=t[1],a=t[2],c=0,s=[];c<l.length;c++)i=l[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&s.push(o[i][0]),o[i]=0;for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&(e[n]=f[n]);for(p&&p(t);s.length;)s.shift()();return u.push.apply(u,a||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,l=1;l<r.length;l++){var f=r[l];0!==o[f]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={1:0},u=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=this["webpackJsonpdev-site"]=this["webpackJsonpdev-site"]||[],f=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var p=f;r()}([])</script><script src="/static/js/2.4a4d27d5.chunk.js"></script><script src="/static/js/main.bcdf59e1.chunk.js"></script></body></html>